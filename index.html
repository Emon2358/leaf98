<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NP2 Emulator</title>
    <script src="https://unpkg.com/np2-wasm/dist/elements.js" type="module"></script>
</head>
<body>
    <h1>NP2 Emulator</h1>
    
    <label for="hdiFile">HDIファイルを選択:</label>
    <input type="file" id="hdiFile" accept=".hdi" />
    
    <label for="dosFile">DOSファイルを選択:</label>
    <input type="file" id="dosFile" accept=".exe,.com" />
    
    <button id="startEmulator">エミュレーターを起動</button>
    
    <PC-9801 id="emulator" cpu-clock="12.5MHz" memory="2MB"></PC-9801>

    <script>
        document.getElementById('startEmulator').addEventListener('click', async () => {
            const hdiFileInput = document.getElementById('hdiFile');
            const dosFileInput = document.getElementById('dosFile');

            if (hdiFileInput.files.length === 0 || dosFileInput.files.length === 0) {
                alert('HDIファイルとDOSファイルの両方を選択してください。');
                return;
            }

            const hdiFile = hdiFileInput.files[0];
            const dosFile = dosFileInput.files[0];

            // HDIファイルをエミュレーターに設定
            const emulator = document.getElementById('emulator');
            emulator.setAttribute('hdi', URL.createObjectURL(hdiFile));

            // DOSファイルをエミュレーターに設定
            emulator.setAttribute('fdd1', URL.createObjectURL(dosFile));

            // エミュレーターを起動
            emulator.start();
        });
    </script>
</body>
</html>
